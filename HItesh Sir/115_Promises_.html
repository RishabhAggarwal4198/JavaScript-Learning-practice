<!DOCTYPE html>
<html lang="en">
<head>
	<title> PROMISES </title>

	<style>

		body{
			background-color: #212121;
		}

	</style>


</head>

<body>

	
</body>


<script>

	// function savetoDb(data, success, failure) {
	// 	let internetSpeed = Math.floor((Math.random()*10)+1);

	// 	if(internetSpeed > 4) {
	// 		console.log('Your data was saved: ', data);
	// 	}else {
	// 		console.log('Weak connection, data nt saved');
	// 	}
	// }

				       // 🔽🔽


	// function savetoDb(data, success, failure) {
	// 	let internetSpeed = Math.floor((Math.random()*10)+1);

	// 	if(internetSpeed > 4) {
	// 		success();	
	// 	}else {
	// 		failure();
	// 	}
	// }




	// ❌❌❌❌ CALL-BACK HELL ❌❌❌❌ 👇👇

	// savetoDb('apna college',
	// () => {
	// 	console.log(`your data was saved `);
	// 	savetoDb(
	// 		'hello world',
	// 		() => {
	// 			console.log(`success2: data2 saved`);
	// 			savetoDb('Rishabh', () => {
	// 				console.log('success3: data 3 saved');
	// 			})
	// 		}, 
	// 		() => {
	// 			console.log(`failure2: weak connection`);
	// 		}
	// 	)
	// }, 
	// () => {
	// 	console.log(`Weak connection. Data not saved`);
	// } )











// 💎✅💎 PROMISE 👇👇

function savetoDb(data) {
	return new Promise ((success, failure) => {      //🍁✅🍁 In general (success, faiure) are represented by (resolve, reject)

	let internetSpeed = Math.floor((Math.random()*10)+1);
	if(internetSpeed > 4){
		success('success : data was saved');
	} else {
		failure ('failure: weak connection')
	}

	});
} 


//✅ Write this :- "savetoDb("Hello Everyone")" thing in the console od the browser to see the result
 
//✅ Three states of PROMISES :-
// + Pending
// + Rejected
// + Fullfilled









// 💎✅💎Then & Catch in PROMISES 👇👇

// let request = savetoDb('apna college');     // ✅Where 'request' is a promise object

// request.then(() => {
// 	console.log('promise was resolved');
// 	console.log(request);
// })
// .catch(() => {
// 	console.log('promise was rejected');
// 	console.log(request);
// })


			   // 🔽🔽 (OR) [much more efficeint way of doing this]


// savetoDb('apna college')
// .then(() => {
// 	console.log('promise was resolved');
// })
// .catch(() => {
// 	console.log('promise was rejected');
// })








// 💎✅💎 Chaining in PROMISES 👇👇

	// savetoDb('apna college')
	// .then(() => {
	// 	console.log('data1 saved');
	// 	savetoDb(`Hello World !`)
	// 		.then(() =>{
	// 			console.log('data2 saved');
	// 		});
	// })
	// .catch(() => {
	// 	console.log('promise was rejected');
	// })

	//✅✅ If even a single of the PROMISE in the aboe not got 'resolved', so it will show  'promise was rejected'


			  // 🔽🔽Much more effective way of writing the above CODE

			  
	savetoDb('apna college')
	.then(() => {
		console.log('data1 saved');
		return savetoDb('Hello World')   //✅ 'return' a function -----➀
	})
	.then(()  => {
		console.log('data2 saved');     //✅If ➀ got resolved it will be printed & if not it will show 'promise was rejected'
		return savetoDb('Rishabh')
	})
	.then(() => {
		console.log(`data3 saved`);      //✅ 'return' a function -------➁
	})									 //✅If ➁ got resolved it will be printed & if not it will show 'promise was rejected'	
	.catch(() => {
		console.log('promise was rejected');
	})

	//📍📍 Run the above code to see how it works

	




	// 💎✅💎 Results & Errors in PROMISES 👇👇

	










</script>






</html>