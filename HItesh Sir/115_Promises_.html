<!DOCTYPE html>
<html lang="en">
<head>
	<title> PROMISES </title>

	<style>

		body{
			background-color: #212121;
		}

	</style>


</head>

<body>

	
</body>


<script>

	// function savetoDb(data, success, failure) {
	// 	let internetSpeed = Math.floor((Math.random()*10)+1);

	// 	if(internetSpeed > 4) {
	// 		console.log('Your data was saved: ', data);
	// 	}else {
	// 		console.log('Weak connection, data nt saved');
	// 	}
	// }

				       // ðŸ”½ðŸ”½


	// function savetoDb(data, success, failure) {
	// 	let internetSpeed = Math.floor((Math.random()*10)+1);

	// 	if(internetSpeed > 4) {
	// 		success();	
	// 	}else {
	// 		failure();
	// 	}
	// }




	// âŒâŒâŒâŒ CALL-BACK HELL âŒâŒâŒâŒ ðŸ‘‡ðŸ‘‡

	// savetoDb('apna college',
	// () => {
	// 	console.log(`your data was saved `);
	// 	savetoDb(
	// 		'hello world',
	// 		() => {
	// 			console.log(`success2: data2 saved`);
	// 			savetoDb('Rishabh', () => {
	// 				console.log('success3: data 3 saved');
	// 			})
	// 		}, 
	// 		() => {
	// 			console.log(`failure2: weak connection`);
	// 		}
	// 	)
	// }, 
	// () => {
	// 	console.log(`Weak connection. Data not saved`);
	// } )











// ðŸ’Žâœ…ðŸ’Ž PROMISE ðŸ‘‡ðŸ‘‡

function savetoDb(data) {
	return new Promise ((success, failure) => {      //ðŸâœ…ðŸ In general (success, faiure) are represented by (resolve, reject)

	let internetSpeed = Math.floor((Math.random()*10)+1);
	if(internetSpeed > 4){
		success('success : data was saved');
	} else {
		failure ('failure: weak connection')
	}

	});
} 


//âœ… Write this :- "savetoDb("Hello Everyone")" thing in the console od the browser to see the result
 
//âœ… Three states of PROMISES :-
// + Pending
// + Rejected
// + Fullfilled









// ðŸ’Žâœ…ðŸ’ŽThen & Catch in PROMISES ðŸ‘‡ðŸ‘‡

// let request = savetoDb('apna college');     // âœ…Where 'request' is a promise object

// request.then(() => {
// 	console.log('promise was resolved');
// 	console.log(request);
// })
// .catch(() => {
// 	console.log('promise was rejected');
// 	console.log(request);
// })


			   // ðŸ”½ðŸ”½ (OR) [much more efficeint way of doing this]


// savetoDb('apna college')
// .then(() => {
// 	console.log('promise was resolved');
// })
// .catch(() => {
// 	console.log('promise was rejected');
// })








// ðŸ’Žâœ…ðŸ’Ž Chaining in PROMISES ðŸ‘‡ðŸ‘‡

	// savetoDb('apna college')
	// .then(() => {
	// 	console.log('data1 saved');
	// 	savetoDb(`Hello World !`)
	// 		.then(() =>{
	// 			console.log('data2 saved');
	// 		});
	// })
	// .catch(() => {
	// 	console.log('promise was rejected');
	// })

	//âœ…âœ… If even a single of the PROMISE in the aboe not got 'resolved', so it will show  'promise was rejected'


			  // ðŸ”½ðŸ”½Much more effective way of writing the above CODE

			  
	savetoDb('apna college')
	.then(() => {
		console.log('data1 saved');
		return savetoDb('Hello World')   //âœ… 'return' a function -----âž€
	})
	.then(()  => {
		console.log('data2 saved');     //âœ…If âž€ got resolved it will be printed & if not it will show 'promise was rejected'
		return savetoDb('Rishabh')
	})
	.then(() => {
		console.log(`data3 saved`);      //âœ… 'return' a function -------âž
	})									 //âœ…If âž got resolved it will be printed & if not it will show 'promise was rejected'	
	.catch(() => {
		console.log('promise was rejected');
	})

	//ðŸ“ðŸ“ Run the above code to see how it works

	




	// ðŸ’Žâœ…ðŸ’Ž parameters 'then' & 'catch' in PROMISES ðŸ‘‡ðŸ‘‡

	savetoDb('apna college')
	.then((rzlt) => {
		console.log('data1 saved');
		console.log('result of promise: ', rzlt);
		return savetoDb('Hello World')   //âœ… 'return' a function -----âž€
	})
	.then((rzlt)  => {
		console.log('data2 saved');     //âœ…If âž€ got resolved it will be printed & if not it will show 'promise was rejected'
		console.log('result of promise: ', rzlt);
		return savetoDb('Rishabh')
	})
	.then((rzlt) => {
		console.log(`data3 saved`);      //âœ… 'return' a function -------âž
		                                 //âœ…If âž got resolved it will be printed & if not it will show 'promise was rejected'	
		console.log('result of promise: ', rzlt);
	})									 
	.catch((err) => {
		console.log('promise was rejected');
		console.log('result of promise: ', err);
	})











</script>






</html>